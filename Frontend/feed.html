<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="icon" href="./assets/icons/favicon.png" type="image/png" />
  <title>Feed • SocialHub</title>

  <!-- Fonts & Icons -->
  <link href="https://fonts.googleapis.com/css2?family=Inter&display=swap" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/remixicon@4.7.0/fonts/remixicon.css" rel="stylesheet" />

  <!-- CSS -->
  <link rel="stylesheet" href="./css/feed.css" />
  <link rel="stylesheet" href="./css/style.css" />
  <link rel="stylesheet" href="./css/profile.css" />
</head>

<body>
  <div class="background"></div>
  <div class="overlay"></div>

  <aside class="sidebar">
    <!-- LOGO -->
    <div class="logo-wrapper">
      <a href="index.html"><img src="./assets/images/logo.png" alt="Logo"></a>
    </div>

    <div class="profile">
      <div class="sidebar-profile-info">
        <!-- Avatar + name/email for sidebar -->
        <img id="userImage" src="http://localhost:5000/uploads/profiles/default.png" class="nav-profile-img"
          alt="Profile" />
        <div>
          <h4 id="userName">Loading...</h4>
          <!-- <p id="userbio">Loading...</p> -->
          <p id="nav-bio">Loading...</p>
        </div>
      </div>

      <div class="profile-stats">
        <span class="stat-item"><strong>10</strong><small>Post</small></span>
        <span class="stat-item"><strong>30</strong><small>Follow</small></span>
        <span class="stat-item"><strong>300</strong><small>Following</small></span>
      </div>
    </div>

    <hr />

    <div class="sidebar-search">
      <i class="ri-search-line"></i>
      <input type="text" placeholder="Explore..." />
    </div>

    <ul class="sidebar-menu">
      <li class="menu-item" href="feed.html"><i class="ri-home-4-line"></i> Home</li>
      <li class="menu-item"><i class="ri-group-line"></i> Community</li>
      <li class="menu-item"><i class="ri-calendar-event-line"></i><span>Events</span></li>
      <li id="open-create-post" class="menu-item"><i class="ri-add-line"></i> Create Post</li>
      <li class="menu-item"><a href="mypost.html"><i class="ri-image-2-line"></i> My Posts</a></li>
    </ul>

    <hr />

    <div class="community-section">
      <div class="community-header">
        <h5>My Community</h5>
        <i class="ri-group-line"></i>
      </div>

      <div class="community-list">
        <div class="community-card">
          <img src="./assets/images/user3.png" alt="User" />
          <div class="community-info">
            <p>UI/UX Designer</p>
            <small>250 members</small>
          </div>
        </div>
      </div>
    </div>
  </aside>

  <main class="main-container">
    <nav class="top-nav">
      <div class="nav-left">
        <div class="brand-name"><i class="ri-home-3-line"></i>Home</div>
        <div class="nav-menu">
          <ul>
            <li>Explore</li>
            <li>Feed</li>
            <li>Network</li>
          </ul>
        </div>
      </div>

      <div class="nav-right">
        <i id="messages-icon" class="ri-message-3-line nav-icon"></i>
        <div id="messages-dropdown" class="dropdown-panel hidden">
          <h4>Messages</h4>
          <ul id="messages-list"></ul>
        </div>

        <i id="notifications-icon" class="ri-notification-line nav-icon"></i>
        <div id="notifications-dropdown" class="dropdown-panel hidden">
          <h4>Notifications</h4>
          <ul id="notifications-list"></ul>
        </div>

        <div class="profile-dropdown-wrapper">
          <!-- Top nav avatar -->
          <img id="top-nav-profile-img" class="nav-profile-img" src="./default.png" alt="Profile" />
          <div class="profile-dropdown">
            <div class="profile-info">
              <!-- Mirror user info in dropdown -->
              <h4 id="sidebar-name">Loading...</h4>
              <p id="sidebar-email">Loading...</p>
            </div>
            <ul>
              <li id="go-profile"><i class="ri-user-line"></i> Profile</li>
              <li><i class="ri-settings-3-line"></i> Settings</li>
              <li><i class="ri-question-line"></i> Help</li>
              <li class="logout" id="logout-btn"><i class="ri-logout-circle-line"></i> Logout</li>
            </ul>
          </div>
        </div>
      </div>
    </nav>

    <section class="feed-section">
      <!-- LEFT: create post + feed -->
      <div class="feed-left">
        <!-- create-post -->
        <div class="feed-card create-post-card hidden" id="create-post-card">
          <form id="create-post-form" class="create-post-form" enctype="multipart/form-data" autocomplete="off">
            <div class="feed-input-row">
              <img id="composerAvatar" src="./assets/images/user3.png" alt="profile" class="feed-user-img" />
              <textarea id="post-text" name="text" class="feed-input" placeholder="What's on your mind?"
                rows="3"></textarea>
            </div>

            <div class="feed-actions">
              <div class="feed-action-icons">
                <label class="action-icon" title="Add photo">
                  <i class="ri-image-2-line"></i>
                  <input id="post-image" name="image" type="file" accept="image/*" style="display:none" />
                </label>
                <label class="action-icon" title="Add file">
                  <i class="ri-attachment-2"></i>
                  <input id="post-file" name="file" type="file" style="display:none" />
                </label>
                <label type="button" id="emoji-btn" class="action-icon" title="Insert emoji"><i
                    class="ri-emotion-normal-line"></i></label>
                <label type="button" id="location-btn" class="action-icon" title="Add location"><i
                    class="ri-map-pin-line"></i></label>
              </div>

              <div class="feed-action-right">
                <span id="save-draft" class="feed-draft"><i class="ri-edit-2-line"></i> Draft</span>
                <button id="post-btn" class="feed-post-btn" type="submit">Post</button>
              </div>
            </div>

            <div id="image-preview" style="display:none; padding-top:10px;">
              <img id="preview-img" src="" style="max-width:100%; border-radius:8px;" alt="preview" />
              <button id="remove-image" type="button" style="display:inline-block;margin-top:6px;">Remove image</button>
            </div>
          </form>
        </div>

        <!-- Feed holder (dynamic posts will be injected after create-post-card) -->
        <div id="feed">
        </div>



        <!-- Example static card (optional demo content) -->
        <div class="feed-card">
          <div class="card-content">
            <div class="card-header">
              <div class="user-info">
                <img src="./assets/images/user3.png" alt="User" class="user-img" />
                <div>
                  <h3>Lucky Andreas</h3>
                  <p class="time"><i class="ri-time-line"></i> 15 minutes ago • <strong>3D Stock Contributor</strong>
                  </p>
                </div>
              </div>
              <div class="header-icons">
                <i class="ri-bookmark-line"></i>
                <i class="ri-more-2-fill"></i>
              </div>
            </div>

            <p class="card-text">What is the reason guys yesterday I uploaded same content, they approved it but today
              they say we no longer accept this.</p>

            <div class="card-image">
              <img src="./assets/images/a4cac8489de4decbc792c9bbbac760fb.jpg" alt="" />
            </div>

            <div class="card-footer">
              <span><i class="ri-heart-line"></i> 1.7K</span>
              <span><i class="ri-message-3-line"></i> 45</span>
              <span><i class="ri-share-forward-line"></i> 12</span>
            </div>
          </div>
        </div>
      </div>

      <!-- RIGHT SIDEBAR -->
      <div class="feed-right">
        <div class="feed-card">
          <div class="card-content">
            <div class="card-header">
              <div class="user-info">
                <img src="./assets/images/user3.png" alt="" class="user-img" />
                <div>
                  <h3>Community Member</h3>
                  <p class="time"><i class="ri-time-line"></i> Active now</p>
                </div>
              </div>
              <div class="header-icons"><i class="ri-more-2-fill"></i></div>
            </div>

            <p class="card-text">Welcome to the creator community! Stay active and connect with others.</p>
          </div>
        </div>

        <div class="community-section">
          <div class="community-header">
            <h3>Top Communities</h3>
            <i class="ri-arrow-down-s-line"></i>
          </div>

          <div class="community-list">
            <div class="community-card">
              <img src="./assets/images/user1.png" />
              <div class="community-info">
                <p>3D Artists</p>
                <small>120K Members</small>
              </div>
            </div>

            <div class="community-card">
              <img src="./assets/images/user2.png" />
              <div class="community-info">
                <p>Web Developers</p>
                <small>98K Members</small>

              </div>
            </div>

            <div class="community-card">
              <img src="./assets/images/user3.png" />
              <div class="community-info">
                <p>UI/UX Designers</p>
                <small>89K Members</small>
              </div>
            </div>

            <div class="community-card">
              <img src="./assets/images/user4.png" />
              <div class="community-info">
                <p>Graphic Designers</p>
                <small>57K Members</small>
              </div>
            </div>
          </div>
        </div>


      </div>
    </section>
  </main>

  <!-- Scripts -->
  <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>

  <script>
    const BASE_URL = "http://localhost:5000";
    const API_URL = `${BASE_URL}/api`;
  </script>

  <!-- Only load feed.js for feed page -->
  <script src="./js/feed.js"></script>

  <!-- Socket client for notifications/messages -->
  <script src="./js/socket.js"></script>

  <!-- General site-wide script -->
  <script src="./js/script.js" defer></script>

  <!-- <script src="./js/posts.js"></script> -->


</body>

</html>